@import "variable.styl"
@import "spacing.styl"
@import "common.styl"
@import "element.styl"
@import "reader.styl"

.nib
  &-container
    position relative

  &-editor[contenteditable="true"]
    outline: none
    font-size: 16px
    font-family $sans
    color: $t.text1
    line-height: 1.5
    *[contenteditable="false"]
      user-select none
      -webkit-user-select none
      -moz-user-select none

  &-prime
    position relative
    min-height 24px
    &-ctrl
      position absolute
      left: 0
      display flex
      justify-content flex-end
      width 72px
      box-sizing border-box
      p(r, 3)

    &-content
      min-height: 24px;
      white-space: pre-wrap
      overflow-wrap: break-word
      -webkit-user-modify: read-write-plaintext-only
      position: relative
      m(x, 7)
      m(y, 0)
      p(a, 0)

  &-placeholder
    user-select: none
    position: absolute
    left: 4px
    top: 0
    color: $t.text3
    z-index -100
    opacity 0
    animation: fadein 0.4s ease 1s forwards

    @keyframes fadein {
      from { opacity: 0}
      to { opacity: 1}
    }

  &-menu
    position absolute
    width: 200px
    top: 36px;
    left: 50%;
    margin-left: -24px;
    p(y, 2)
    z-index: 100000000000
    background $t.bg
    color: $t.text1
    font-size: 14px
    font-weight 500
    display none
    .nib-icon
      color: $t.text2
    &._active
      display block
    &-divider
      border 1px solid $t.grey
      m(x, 3)
      m(y, 2)
    &-tile
      display flex
      align-items center
      p(x, 3)
      p(y, 2)
      cursor: pointer
      svg.nib-icon
        height 20px
        width 20px
        m(r, 2)
      div
      span
        line-height 20px
      &:hover
        background $t.grey


  &-insert
    position: absolute;
    width: 100%;
    bottom: -22px;
    padding: 0 64px
    box-sizing: border-box;
    display flex
    align-items center
    height 20px
    opacity 0
    &:hover
      opacity 1
    &-line
      flex: 1 1 auto;
      border: 1px solid $t.grey
    &-first
      position: relative
      bottom: 0
      top: 0

  &-toolbar
    position: absolute
    height 32px
    p(x,2)
    border-radius 4px
    transform translateX(-50%)
    background $t.text1
    z-index 1000000000000000
    display none
    align-items center
    user-select: none
    -webkit-user-select: none
    transition: 0.1s ease-out
    &._active
      display flex
    &:after
      content ''
      width 0
      border 8px solid transparent
      border-top-color $t.text1
      position absolute
      bottom -16px
      left 50%
      margin-left -8px
    .nib-icon-btn
      box-sizing content-box
      width 16px
      height 16px
      p(a,1)
      &:hover
        background rgba($t.text2, 0.5)
      &._active
        .nib-icon
          color: $t.pri
    &-divider
      height 16px
      border-left 1px solid $t.text3
      m(x,2)








